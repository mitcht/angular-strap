{"version":3,"sources":["modules/collapse.js"],"names":["angular","module","provider","controller","this","animation","self","forEach","startCollapsed","isDefined","allowMultiple","$scope","$element","$attrs","activeIndexes","$targets","$active","i","length","index","value","indexOf","activeItems","splice","activateItem","$options","$get","defaults","$collapse","key","$viewChangeListeners","$registerToggle","element","$toggles","push","$unregisterToggle","$unregisterTarget","deactivateItem","fn","fixActiveItemIndexes","$setActive","disallowToggle","isActive","$activeIndexes","link","require","directive","bsCollapseCtrl","controllers","$window","$animate","ngModelCtrl","$setViewValue","$formatters","attrs","modelValue","isArray","scope","bsCollapseToggle","$apply","$on","on","$registerTarget","render","active","action","activeClass","addClass"],"mappings":"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","file":"modules/collapse.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.collapse', [])\r\n\r\n  .provider('$collapse', function() {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-collapse',\r\n      disallowToggle: false,\r\n      activeClass: 'in',\r\n      startCollapsed: false,\r\n      allowMultiple: false\r\n    };\r\n\r\n    var controller = this.controller = function($scope, $element, $attrs) {\r\n      var self = this;\r\n\r\n      // Attributes options\r\n      self.$options = angular.copy(defaults);\r\n      angular.forEach(['animation', 'disallowToggle', 'activeClass', 'startCollapsed', 'allowMultiple'], function (key) {\r\n        if(angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\r\n      });\r\n\r\n      // use string regex match boolean attr falsy values, leave truthy values be\r\n      var falseValueRegExp = /^(false|0|)$/i;\r\n      angular.forEach(['disallowToggle', 'startCollapsed', 'allowMultiple'], function(key) {\r\n        if(angular.isDefined($attrs[key]) && falseValueRegExp.test($attrs[key])) {\r\n          self.$options[key] = false;\r\n        }\r\n      });\r\n\r\n      self.$toggles = [];\r\n      self.$targets = [];\r\n\r\n      self.$viewChangeListeners = [];\r\n\r\n      self.$registerToggle = function(element) {\r\n        self.$toggles.push(element);\r\n      };\r\n      self.$registerTarget = function(element) {\r\n        self.$targets.push(element);\r\n      };\r\n\r\n      self.$unregisterToggle = function(element) {\r\n        var index = self.$toggles.indexOf(element);\r\n        // remove toggle from $toggles array\r\n        self.$toggles.splice(index, 1);\r\n      };\r\n      self.$unregisterTarget = function(element) {\r\n        var index = self.$targets.indexOf(element);\r\n\r\n        // remove element from $targets array\r\n        self.$targets.splice(index, 1);\r\n\r\n        if (self.$options.allowMultiple) {\r\n          // remove target index from $active array values\r\n          deactivateItem(element);\r\n        }\r\n\r\n        // fix active item indexes\r\n        fixActiveItemIndexes(index);\r\n\r\n        self.$viewChangeListeners.forEach(function(fn) {\r\n          fn();\r\n        });\r\n      };\r\n\r\n      // use array to store all the currently open panels\r\n      self.$targets.$active = !self.$options.startCollapsed ? [0] : [];\r\n      self.$setActive = $scope.$setActive = function(value) {\r\n        if(angular.isArray(value)) {\r\n          self.$targets.$active = value;\r\n        }\r\n        else if(!self.$options.disallowToggle) {\r\n          // toogle element active status\r\n          isActive(value) ? deactivateItem(value) : activateItem(value);\r\n        } else {\r\n          activateItem(value);\r\n        }\r\n\r\n        self.$viewChangeListeners.forEach(function(fn) {\r\n          fn();\r\n        });\r\n      };\r\n\r\n      self.$activeIndexes = function() {\r\n        return self.$options.allowMultiple ? self.$targets.$active :\r\n          self.$targets.$active.length === 1 ? self.$targets.$active[0] : -1;\r\n      };\r\n\r\n      function fixActiveItemIndexes(index) {\r\n        // item with index was removed, so we\r\n        // need to adjust other items index values\r\n        var activeIndexes = self.$targets.$active;\r\n        for(var i = 0; i < activeIndexes.length; i++) {\r\n          if (index < activeIndexes[i]) {\r\n            activeIndexes[i] = activeIndexes[i] - 1;\r\n          }\r\n\r\n          // the last item is active, so we need to\r\n          // adjust its index\r\n          if (activeIndexes[i] === self.$targets.length) {\r\n            activeIndexes[i] = self.$targets.length - 1;\r\n          }\r\n        }\r\n      }\r\n\r\n      function isActive(value) {\r\n        var activeItems = self.$targets.$active;\r\n        return activeItems.indexOf(value) === -1 ? false : true;\r\n      }\r\n\r\n      function deactivateItem(value) {\r\n        var index = self.$targets.$active.indexOf(value);\r\n        if (index !== -1) {\r\n          self.$targets.$active.splice(index, 1);\r\n        }\r\n      }\r\n\r\n      function activateItem(value) {\r\n        if (!self.$options.allowMultiple) {\r\n          // remove current selected item\r\n          self.$targets.$active.splice(0, 1);\r\n        }\r\n\r\n        if (self.$targets.$active.indexOf(value) === -1) {\r\n          self.$targets.$active.push(value);\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    this.$get = function() {\r\n      var $collapse = {};\r\n      $collapse.defaults = defaults;\r\n      $collapse.controller = controller;\r\n      return $collapse;\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsCollapse', function($window, $animate, $collapse) {\r\n\r\n    var defaults = $collapse.defaults;\r\n\r\n    return {\r\n      require: ['?ngModel', 'bsCollapse'],\r\n      controller: ['$scope', '$element', '$attrs', $collapse.controller],\r\n      link: function postLink(scope, element, attrs, controllers) {\r\n\r\n        var ngModelCtrl = controllers[0];\r\n        var bsCollapseCtrl = controllers[1];\r\n\r\n        if(ngModelCtrl) {\r\n\r\n          // Update the modelValue following\r\n          bsCollapseCtrl.$viewChangeListeners.push(function() {\r\n            ngModelCtrl.$setViewValue(bsCollapseCtrl.$activeIndexes());\r\n          });\r\n\r\n          // modelValue -> $formatters -> viewValue\r\n          ngModelCtrl.$formatters.push(function(modelValue) {\r\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\r\n            if (angular.isArray(modelValue)) {\r\n              // model value is an array, so just replace\r\n              // the active items directly\r\n              bsCollapseCtrl.$setActive(modelValue);\r\n            }\r\n            else {\r\n              var activeIndexes = bsCollapseCtrl.$activeIndexes();\r\n\r\n              if (angular.isArray(activeIndexes)) {\r\n                // we have an array of selected indexes\r\n                if (activeIndexes.indexOf(modelValue * 1) === -1) {\r\n                  // item with modelValue index is not active\r\n                  bsCollapseCtrl.$setActive(modelValue * 1);\r\n                }\r\n              }\r\n              else if (activeIndexes !== modelValue * 1) {\r\n                bsCollapseCtrl.$setActive(modelValue * 1);\r\n              }\r\n            }\r\n            return modelValue;\r\n          });\r\n\r\n        }\r\n\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsCollapseToggle', function() {\r\n\r\n    return {\r\n      require: ['^?ngModel', '^bsCollapse'],\r\n      link: function postLink(scope, element, attrs, controllers) {\r\n\r\n        var ngModelCtrl = controllers[0];\r\n        var bsCollapseCtrl = controllers[1];\r\n\r\n        // Add base attr\r\n        element.attr('data-toggle', 'collapse');\r\n\r\n        // Push pane to parent bsCollapse controller\r\n        bsCollapseCtrl.$registerToggle(element);\r\n\r\n        // remove toggle from collapse controller when toggle is destroyed\r\n        scope.$on('$destroy', function() {\r\n          bsCollapseCtrl.$unregisterToggle(element);\r\n        });\r\n\r\n        element.on('click', function() {\r\n          var index = attrs.bsCollapseToggle && attrs.bsCollapseToggle !== 'bs-collapse-toggle' ? attrs.bsCollapseToggle : bsCollapseCtrl.$toggles.indexOf(element);\r\n          bsCollapseCtrl.$setActive(index * 1);\r\n          scope.$apply();\r\n        });\r\n\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsCollapseTarget', function($animate) {\r\n\r\n    return {\r\n      require: ['^?ngModel', '^bsCollapse'],\r\n      // scope: true,\r\n      link: function postLink(scope, element, attrs, controllers) {\r\n\r\n        var ngModelCtrl = controllers[0];\r\n        var bsCollapseCtrl = controllers[1];\r\n\r\n        // Add base class\r\n        element.addClass('collapse');\r\n\r\n        // Add animation class\r\n        if(bsCollapseCtrl.$options.animation) {\r\n          element.addClass(bsCollapseCtrl.$options.animation);\r\n        }\r\n\r\n        // Push pane to parent bsCollapse controller\r\n        bsCollapseCtrl.$registerTarget(element);\r\n\r\n        // remove pane target from collapse controller when target is destroyed\r\n        scope.$on('$destroy', function() {\r\n          bsCollapseCtrl.$unregisterTarget(element);\r\n        });\r\n\r\n        function render() {\r\n          var index = bsCollapseCtrl.$targets.indexOf(element);\r\n          var active = bsCollapseCtrl.$activeIndexes();\r\n          var action = 'removeClass';\r\n          if (angular.isArray(active)) {\r\n            if (active.indexOf(index) !== -1) {\r\n              action = 'addClass';\r\n            }\r\n          }\r\n          else if (index === active) {\r\n            action = 'addClass';\r\n          }\r\n\r\n          $animate[action](element, bsCollapseCtrl.$options.activeClass);\r\n        }\r\n\r\n        bsCollapseCtrl.$viewChangeListeners.push(function() {\r\n          render();\r\n        });\r\n        render();\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"],"sourceRoot":"/source/"}